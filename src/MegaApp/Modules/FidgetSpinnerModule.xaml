<UserControl x:Class="MegaApp.Modules.FidgetSpinnerModule"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="340" d:DesignWidth="360">
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibility" />
        <Style x:Key="SpinnerArmStyle" TargetType="Shape">
            <Setter Property="Fill" Value="#186C60" />
            <Setter Property="Stroke" Value="#33FFFFFF" />
            <Setter Property="StrokeThickness" Value="3" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding UseAlternatePalette}" Value="True">
                    <Setter Property="Fill" Value="#2C50D1" />
                    <Setter Property="Stroke" Value="#44EEF1FF" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
        <Style x:Key="BearingStyle" TargetType="Ellipse">
            <Setter Property="Fill" Value="#55D4FFF1" />
            <Setter Property="Stroke" Value="#AAFFFFFF" />
            <Setter Property="StrokeThickness" Value="3" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding UseAlternatePalette}" Value="True">
                    <Setter Property="Fill" Value="#66F9D066" />
                    <Setter Property="Stroke" Value="#EEFFFFFF" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>

    <Border Style="{StaticResource ModuleCard}">
        <StackPanel>
            <DockPanel>
                <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                    <Button Content="Swap Palette"
                            Padding="10 4"
                            Margin="0 0 8 0"
                            Command="{Binding TogglePaletteCommand}" />
                    <TextBlock Text="{Binding DisplaySpeed, StringFormat={}{0}Â°/tick}"
                               Foreground="#AAFFFFFF"
                               VerticalAlignment="Center" />
                </StackPanel>
                <TextBlock Text="Fidget Spinner"
                           Style="{StaticResource ModuleTitle}"
                           Margin="0" />
            </DockPanel>

            <Grid Margin="0 16"
                  Width="240"
                  Height="240"
                  HorizontalAlignment="Center">
                <Grid>
                    <Ellipse Width="220"
                             Height="220"
                             Stroke="#223C4F"
                             StrokeThickness="4">
                        <Ellipse.Effect>
                            <DropShadowEffect Color="#33000000"
                                              BlurRadius="20"
                                              ShadowDepth="0" />
                        </Ellipse.Effect>
                    </Ellipse>
                    <Ellipse Width="220"
                             Height="220"
                             Stroke="#66FFFFFF"
                             StrokeThickness="12"
                             Opacity="{Binding MotionBlurOpacity}">
                        <Ellipse.Effect>
                            <BlurEffect Radius="12" />
                        </Ellipse.Effect>
                    </Ellipse>
                </Grid>

                <Grid Width="200"
                      Height="200"
                      RenderTransformOrigin="0.5,0.5">
                    <Grid.RenderTransform>
                        <RotateTransform Angle="{Binding Angle}" />
                    </Grid.RenderTransform>

                    <Rectangle Style="{StaticResource SpinnerArmStyle}"
                               Width="150"
                               Height="24"
                               RadiusX="12"
                               RadiusY="12"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center" />
                    <Rectangle Style="{StaticResource SpinnerArmStyle}"
                               Width="150"
                               Height="24"
                               RadiusX="12"
                               RadiusY="12"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               RenderTransformOrigin="0.5,0.5">
                        <Rectangle.RenderTransform>
                            <RotateTransform Angle="120" />
                        </Rectangle.RenderTransform>
                    </Rectangle>
                    <Rectangle Style="{StaticResource SpinnerArmStyle}"
                               Width="150"
                               Height="24"
                               RadiusX="12"
                               RadiusY="12"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               RenderTransformOrigin="0.5,0.5">
                        <Rectangle.RenderTransform>
                            <RotateTransform Angle="240" />
                        </Rectangle.RenderTransform>
                    </Rectangle>

                    <Ellipse Style="{StaticResource BearingStyle}"
                             Width="74"
                             Height="74"
                             HorizontalAlignment="Center"
                             VerticalAlignment="Center">
                        <Ellipse.RenderTransform>
                            <TranslateTransform X="70" />
                        </Ellipse.RenderTransform>
                    </Ellipse>
                    <Ellipse Style="{StaticResource BearingStyle}"
                             Width="74"
                             Height="74"
                             HorizontalAlignment="Center"
                             VerticalAlignment="Center">
                        <Ellipse.RenderTransform>
                            <TranslateTransform X="-35" Y="60" />
                        </Ellipse.RenderTransform>
                    </Ellipse>
                    <Ellipse Style="{StaticResource BearingStyle}"
                             Width="74"
                             Height="74"
                             HorizontalAlignment="Center"
                             VerticalAlignment="Center">
                        <Ellipse.RenderTransform>
                            <TranslateTransform X="-35" Y="-60" />
                        </Ellipse.RenderTransform>
                    </Ellipse>

                    <Ellipse Width="86"
                             Height="86"
                             Fill="#14474C"
                             Stroke="#11FFFFFF"
                             StrokeThickness="4">
                        <Ellipse.Style>
                            <Style TargetType="Ellipse" BasedOn="{StaticResource BearingStyle}">
                                <Setter Property="Fill" Value="#14474C" />
                                <Setter Property="Width" Value="86" />
                                <Setter Property="Height" Value="86" />
                                <Setter Property="StrokeThickness" Value="4" />
                                <Setter Property="Stroke" Value="#33FFFFFF" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding UseAlternatePalette}" Value="True">
                                        <Setter Property="Fill" Value="#1C2E66" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Ellipse.Style>
                    </Ellipse>
                    <Ellipse Width="42"
                             Height="42"
                             Fill="#FFE28B"
                             Stroke="#FFFFDDB1"
                             StrokeThickness="4">
                        <Ellipse.Style>
                            <Style TargetType="Ellipse">
                                <Setter Property="Fill" Value="#FFE28B" />
                                <Setter Property="Stroke" Value="#FFFFDDB1" />
                                <Setter Property="StrokeThickness" Value="4" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding UseAlternatePalette}" Value="True">
                                        <Setter Property="Fill" Value="#FFF18D" />
                                        <Setter Property="Stroke" Value="#FFFDE7" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Ellipse.Style>
                        <Ellipse.Effect>
                            <DropShadowEffect Color="#33000000" BlurRadius="10" ShadowDepth="0" />
                        </Ellipse.Effect>
                    </Ellipse>
                </Grid>

                <Ellipse Width="28"
                         Height="28"
                         Fill="#FFF59E"
                         Stroke="#FFFFC107"
                         StrokeThickness="2"
                         HorizontalAlignment="Right"
                         VerticalAlignment="Top"
                         Margin="12"
                         Visibility="{Binding ShowSpark, Converter={StaticResource BoolToVisibility}}">
                    <Ellipse.Effect>
                        <DropShadowEffect Color="#FFFFE082" BlurRadius="15" ShadowDepth="0" />
                    </Ellipse.Effect>
                </Ellipse>
            </Grid>

            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Center"
                        Margin="0 8 0 0">
                <Button Content="Spin"
                        Command="{Binding SpinCommand}"
                        Padding="16 6"
                        Margin="0 0 8 0" />
                <Button Content="Stop"
                        Command="{Binding StopCommand}"
                        Padding="16 6" />
            </StackPanel>
        </StackPanel>
    </Border>
</UserControl>
